---
---
Redovisning kmom10
=========================

##1.
###Krav 1
Jag valde att göra en webbplats om mina husdjur. Djuren är “produkterna” och bloggen innehåller inlägg som påminner om en livsstilsblogg med inlägg om mitt liv med mina djur. På “produktsidan” visar jag upp varje djur med en bild, dess namn och kort information. För att det skulle fungera har jag lagt in extra kolumner i tabellen vilka är img och info. Om man trycker på ett djur så hämtas all information om djuren och man kan läsa mer på en egen sida. I bloggen finns inledning till några inlägg. Jag har skapat en metod som letar efter `<!--more-->` och bara visar upp texten innan det i inledningen till inlägget. Jag har även lagt in så att inledningarna till blogginläggen formateras.

###Krav 2
Jag tänkte att jag vill hålla min kod ganska uppdelad i flera specifika klasser istället för en/några stora. Jag gjorde tre kontroller för CMS, en som används till admingränssnittet, en för bloggen och en för pages. Dessa tre använder sig av varsin separat klass som hanterar databasfrågor. Man hade kunnat ha en kontroller och en separat klass för CMS men jag valde att dela upp det eftersom man kanske vill bygga ut funktionaliteten och lägga in mer specialiserade åtgärder för pages/blogposts. Jag gjorde även en kontroller `UserController` till användargränsnittet. Kontrollern använder klassen `Users` som hanterar databasfrågor mot tabellen `users_proj` för att t.ex. skapa en ny användare eller visa en användares information. Jag har brutit ut lite kod och lagt i traits för att undvika duplicering av kod. I min klasstruktur använder jag endast komposition och traits, inte arv eftersom jag kände att detta sätt passade bättre i min kod.

###Krav 3
Admingränssnittet hanteras av kontrollen `CMSController`. När man försöker nå adminsidan kontrolleras det om en SESSION-variabel är satt eller inte, om inte skickas man till en sida där man kan logga in. Om man loggar in som admin så kommer man till indexsidan som visar alla pages och posts i databasen. På den sidan kan man även välja att uppdatera eller radera en viss sida/post. Man skulle kunna lägga in en funktion där man kan trycka på en för att se den i sin formaterade helhet eller att när man uppdaterar en page/post så kan man se hur den kommer se ut när texten formateras. Jag försökte göra admingränssnittet så tydligt och simpelt som möjligt så att det inte är krångligt att hantera databasen. Det finns en sidebar med länkar för att visa alla användare, skapa nytt, återskapa databasen och logga ut. När man loggar ut sätts SESSION-variabeln till false och redirectar till login-sidan.

###Krav 5
Kontrollern `UserController` sköter allt som har med inloggning och användare att göra. Kontrollern använder klassen `User`. Jag byggde ut min databastabell `users` med en kolumn `role` för att kunna skilja på admin och vanliga användare. När man försöker logga in anropas en metod i klassen `User` som kollar i databasen om det finns en användare som matchar. Om det är en match så hämtas information om användaren och det kontrolleras om användaren är admin eller inte. Om inte så hämtas en gravatar för den mailadressen och sedan skickas man till en sida där man kan se sina uppgifter. På den sidan kan man redigera sina uppgifter och logga ut. Jag ville göra att beroende på om man är inloggad eller inte så visas olika saker i navbaren. Jag skapade då en egen template-fil och lade den i navbaren. I den så tar jag in session-variabler och visar olika beroende på om en användare, admin eller ingen är inloggad.

##3.
Projektet gick bra att genomföra och jag stötte inte på några större problem. Det som var svårt var enhetstestningen. Nästan alla mina klasser och metoder använder GET/POST/SESSION och databasuppkoppling och jag vet inte hur jag ska göra för att testa då. Jag funderade ett tag på hur jag skulle lösa inloggningen, om jag skulle försöka hämta användaren och sen kontrollera om något kom tillbaka, men jag kollade runt lite och hittade funktionen SELECT EXISTS() som returnerar 1 eller 0 beroende på om det är en matchning. Jag kände att den funktionen är mer logisk att använda och att det blir lättare att läsa i min kod och förstå vad den försöker göra. Det har gått bra hur jag ska strukturera upp mina klasser eftersom jag har fått mycket träning i det under kursens gång. Projektet känns rimligt för den här kursen, det knyter samman det som vi har gjort under kursens gång. Att enbart göra de obligatoriska kraven gick ganska snabbt eftersom man hade med sig mycket från de tidigare kursmomenten men de optionella kraven kändes svårare och tidskrävande så det var bra att det fanns både och.

##4.
Jag känner mig väldigt nöjd med kursen och skulle absolut rekommendera den vidare. Det har varit stundtals kämpigt och mycket att göra, speciellt i uppgiften “Tärningsspelet 100” där jag tyckte att det var väldigt svårt att veta hur jag skulle strukturera min kod. Jag känner dock att jag har utvecklats och lärt mig väldigt mycket av den här kursen. I början kändes det jätte svårt att veta hur jag skulle bygga klasserna, hur jag skulle dela upp dem, hur jag skulle koppla samman dem osv men nu känns det mycket mer naturligt. Jag har inget att klaga över gällande materialet och handledningen utan den har varit bra som vanligt. Kursen får 10/10.
